## 目标与范围
- 在首页顶部加入类似 tools.liumingye.cn 的聚合搜索栏，含三组标签：
  1) 搜索引擎：必应/Google/360(so.com)/站内搜索
  2) 影视搜索：若干常用影视站与“全网(Bing)”聚合
  3) 资料搜索：豆瓣/IMDb/TMDB
- 尽量复用现有 UI 组件，保持最小改动，不影响其他模块。

## UI 布局
- 放置位置：`components/site-header.tsx` 顶部导航内，置于右侧工具区中（`ThemeToggle` 左侧）。
- 结构：Tabs（引擎/影视/资料） + Provider 下拉 + 输入框 + 搜索按钮；移动端保持紧凑。
- 组件复用：`components/ui/input.tsx`、`components/ui/button.tsx`、`components/ui/dropdown-menu.tsx`（或 `select`）。

## Provider 与 URL 模板
- 搜索引擎：
  - 必应：`https://www.bing.com/search?q={q}`
  - Google：`https://www.google.com/search?q={q}`
  - 360(so.com)：`https://www.so.com/s?q={q}`
  - 站内：内部处理（跳转到 `/?q={q}` 并在首页过滤）
- 影视搜索（默认优先使用“全网(Bing)”）：
  - HDmoli：`https://www.hdmoli.com/search.html?searchword={q}`
  - 低端影视：`https://ddys.art/?s={q}`
  - 厂长资源：`https://www.czzy.top/search?query={q}`（若不同域名可后续配置）
  - 在线之家：`https://www.zxzj.site/index.php?searchword={q}`（域名可能随时间变化）
  - 全网(Bing)：`https://www.bing.com/search?q={q} site:hdmoli.com OR site:czzy.top OR site:ddys.art`
- 资料搜索：
  - 豆瓣：`https://search.douban.com/movie/subject_search?search_text={q}`
  - IMDb：`https://www.imdb.com/find/?q={q}`
  - TMDB：`https://www.themoviedb.org/search?query={q}`
- 以常量配置数组管理，便于增删；一次仅打开一个站点，支持快捷键“Ctrl+Enter”多站同时打开（最多 5 个）。

## 交互与行为
- 键盘：Enter 触发当前 Provider 搜索；Ctrl+Enter 同类标签下依次打开多个 Provider（受浏览器弹窗限制，控制数量）。
- 提交规则：
  - 外部站点：`window.open(providerUrl + encodeURIComponent(q), '_blank')`
  - 站内搜索：跳转至 `/?q={q}`，在首页执行本地过滤
- 为空处理：输入为空禁用搜索按钮；去除首尾空格。

## 站内搜索策略（最小改动）
- 在 `app/page.tsx` 使用 `useSearchParams()` 读取 `q`，将 `q` 传递给 `LinkContent`（或在该文件直接过滤 `navResources`）。
- 过滤范围：站点标题、描述、URL，大小写不敏感；高亮匹配词或仅过滤显示（先实现过滤）。
- 不改动布局与数据结构：仅增加查询参数解析与简单过滤逻辑。

## 修改点与范围
- 仅改动：
  - `components/site-header.tsx`：新增搜索栏 UI 与交互逻辑
  - `app/page.tsx`：解析 `q` 并基于 `navResources`/`navItems` 执行过滤渲染
- 不改动：`app/layout.tsx`、数据结构、其他组件逻辑。

## 实现步骤
1) 在 `site-header` 注入搜索栏容器：Tabs + Provider 下拉 + 输入框 + 搜索按钮；本地维护 `activeTab`、`providerKey`、`q`。
2) 提交处理函数：根据 `activeTab` 查找配置并执行 `window.open()` 或 `router.push('/?q=...')`。
3) 在 `app/page.tsx` 获取查询参数 `q`，对 `navResources` 做前端过滤，传给 `LinkContent`；无 `q` 时保持原样。
4) 处理移动端样式与容器宽度，保证可用性；加入基本防抖（300ms）仅用于站内输入联动。
5) 自测：不同 Provider 与 Tab 的跳转；站内搜索过滤正确；空值、特殊字符、中文输入编码正常。

## 验证与回滚
- 验证：本地启动后在首页执行实际搜索与站内过滤；检查弹窗限制与跨域跳转。
- 回滚：如出现样式或交互问题，仅移除 `site-header` 的搜索栏片段即可；站内过滤逻辑以查询参数为唯一入口，删除即恢复原状。

## 可选增强（后续）
- 为站内搜索增加高亮与统计；支持按分类过滤。
- Provider 配置支持环境变量域名，减少镜像变化影响。
- 支持 `cmdk` 作为全局命令面板集成搜索。
